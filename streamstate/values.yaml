# Default values for streamstate.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

nameOverride: "streamstate"
fullnameOverride: "streamstate-chart"
staticip_name: "${staticip_name}"

namespaces:
  sparknamespace: "${sparknamespace}"  # hacky, but need something like https://github.com/helm/helm/pull/6876 to make it not hacky...

#sparknamespace: "${sparknamespace}"
organization: "${organization}"
project: "${project}"
dockerTag: "${tag}"
registryprefix: us-central1-docker.pkg.dev
registry: ${registry}
serviceaccounts:
  spark_history_service_account: 
    name: ${sparkhistoryserviceaccount}
    iam_binding: ${gcp_sparkhistory_svc}
  argo_service_account: 
    name: ${argoserviceaccount}
    iam_binding: ${gcp_argo_svc}
  spark_service_account: 
    name: ${sparkserviceaccount}
    namespace: "${sparknamespace}"
    iam_binding: ${gcp_spark_svc}
  docker_secret_write_service_account: 
    name: ${dockerwriteserviceaccount}
    iam_binding: ${gcp_docker_svc}
  firestore_service_account:
    name: ${firestoreserviceaccount}
    iam_binding: ${gcp_firestore_svc}
  firestore_viewer_service_account:
    name: ${firestoreviewerserviceaccount}
    iam_binding: ${gcp_firestore_viewer_svc}
  mainui_service_account:
    name: mainui
    iam_binding: ""


buckets:
  bucket_without_gs: ${bucket_without_gs}

oauth:
  client_id: ""
  client_secret: ""
  base_64_oidc_issuer_url: aHR0cHM6Ly9kZXYtMjA0OTAwNDQub2t0YS5jb20vb2F1dGgyL2RlZmF1bHQ=
  base_64_extra_jwt_issuers: aHR0cHM6Ly9kZXYtMjA0OTAwNDQub2t0YS5jb20vb2F1dGgyL2RlZmF1bHQ9YXBpOi8vZGVmYXVsdA==


dataconfigargo: sparkjobdata
sparkhistoryname: ${sparkhistoryname}


kubernetes-secret-generator:
  secretLength: 32
  watchNamespace: "" 
  rbac:
    clusterRole: false 

kube-prometheus-stack:
  kube-state-metrics:
    extraArgs:
      - --metric-labels-allowlist=pods=[spark-role,sparkoperator.k8s.io/app-name,sparkoperator.k8s.io/launched-by-spark-operator]
  alertmanager:
    enabled: false
    useClusterRole: false

  grafana:
    enabled: false

  prometheus-operator:
    namespaces:
      releaseNamespace: true
      additional:
        - "${sparknamespace}"

  kubeControllerManager:
    enabled: false

  nodeExporter:
    enabled: false

  kubeScheduler:
    enabled: false

  kubeProxy:
    enabled: false 

  kubeEtcd:
    enabled: false 

  kubeDns:
    enabled: false #I changed this

  coreDns:
    enabled: false

  prometheus:
    prometheusSpec:
      # blank since "monitoring" prefix will be stripped by nginx
      routePrefix: / # https://prometheus.io/docs/guides/tls-encryption/
      externalUrl: https://${organization}.streamstate.org/monitoring # see https://blog.cubieserver.de/2020/configure-prometheus-on-a-sub-path-behind-reverse-proxy/ and gateway/ingress.yml


# this is giving a 403 error for accessing gcs
spark-history-server:
  serviceAccount:
    create: false
    name: ${sparkhistoryserviceaccount}
  gcs:
    logDirectory: gs://${bucket_without_gs}/${sparkhistoryname}
    enableGCS: true
    enableIAM: true
  pvc:
    enablePVC: false

  nfs:
    enableExampleNFS: false

  image:
    repository: us-central1-docker.pkg.dev/${project}/${project}/sparkhistory
    tag: ${tag}
    pullPolicy: IfNotPresent

  service:
    type: ClusterIP

  environment:
    SPARK_PUBLIC_DNS: https://${organization}.streamstate.org/sparkhistory/

argo-workflows:
  workflow:
    serviceAccount:
      create: false # Specifies whether a service account should be created
      annotations: {}
      name: ${argoserviceaccount} # Service account which is used to run workflows
    rbac:
      create: false # adds Role and RoleBinding for the above specified service account to be able to run workflows

  createAggregateRoles: false
  singleNamespace: true
  controller:
    podAnnotations:
      prometheus.io/scrape: "true"
      prometheus.io/path: /metrics
      prometheus.io/port: "9090"
    metricsConfig:
      enabled: true
    clusterWorkflowTemplates:
      # Create a ClusterRole and CRB for the controller to access ClusterWorkflowTemplates.
      enabled: false
    serviceMonitor: # prometheus operator
      enabled: true 
      additionalLabels:
        app: argo
        release: prometheus

  server:
    enabled: true
    # only updates base url of resources on client side,
    # it's expected that a proxy server rewrites the request URL and gets rid of this prefix
    # https://github.com/argoproj/argo-workflows/issues/716#issuecomment-433213190
    baseHref: /ui/ # see gateway/ingress.yml https://github.com/argoproj/argo-workflows/blob/master/docs/argo-server.md#ingress
    clusterWorkflowTemplates:
      # Create a ClusterRole and CRB for the server to access ClusterWorkflowTemplates.
      enabled: false
    
  useDefaultArtifactRepo: true
  artifactRepository:
    # archiveLogs will archive the main container logs as an artifact
    archiveLogs: true
    gcs:
      # todo, probably make this get passed in entirely.  see ./terraform/organization/serviceaccounts/serviceaccounts.tf
      bucket: streamstate-argologs-${organization} 
      keyFormat: "{{workflow.namespace}}/{{workflow.name}}/"

grafana:
  rbac:
    namespaced: true
  service:
    type: ClusterIP
    port: 3000
    targetPort: 3000

  # https://grafana.com/tutorials/run-grafana-behind-a-proxy/
  # gateway/ingress.yml
  grafana.ini:
    auth.anonymous:
        enabled: true
    server:
      server:
      domain: ${organization}.streamstate.org 
      root_url: https://${organization}.streamstate.org/grafana/
      serve_from_sub_path: true
  datasources: 
    datasources.yaml:
      apiVersion: 1
      datasources:
      - name: Prometheus
        type: prometheus
        url: http://prometheus-operated.serviceplane-${organization}.svc.cluster.local:9090
        access: proxy
        isDefault: true

  dashboardProviders:
    dashboardproviders.yaml:
      apiVersion: 1
      providers:
        - name: default
          orgId: 1
          folder:
          type: file
          disableDeletion: true
          editable: false
          options:
            path: /var/lib/grafana/dashboards/default
  dashboards:
    default:
      argo:
        json: |
          {
            "__inputs": [
              {
                "name": "DS_PROMETHEUS",
                "label": "Prometheus",
                "description": "",
                "type": "datasource",
                "pluginId": "prometheus",
                "pluginName": "Prometheus"
              }
            ],
            "__requires": [
              {
                "type": "grafana",
                "id": "grafana",
                "name": "Grafana",
                "version": "7.4.2"
              },
              {
                "type": "panel",
                "id": "graph",
                "name": "Graph",
                "version": ""
              },
              {
                "type": "datasource",
                "id": "prometheus",
                "name": "Prometheus",
                "version": "1.0.0"
              },
              {
                "type": "panel",
                "id": "stat",
                "name": "Stat",
                "version": ""
              },
              {
                "type": "panel",
                "id": "text",
                "name": "Text",
                "version": ""
              }
            ],
            "annotations": {
              "list": [
                {
                  "builtIn": 1,
                  "datasource": "-- Grafana --",
                  "enable": true,
                  "hide": true,
                  "iconColor": "rgba(0, 211, 255, 1)",
                  "name": "Annotations & Alerts",
                  "type": "dashboard"
                }
              ]
            },
            "editable": true,
            "gnetId": 13927,
            "graphTooltip": 0,
            "id": null,
            "iteration": 1614070847797,
            "links": [],
            "panels": [
              {
                "collapsed": false,
                "datasource": null,
                "gridPos": {
                  "h": 1,
                  "w": 24,
                  "x": 0,
                  "y": 0
                },
                "id": 28,
                "panels": [],
                "title": "Currently",
                "type": "row"
              },
              {
                "datasource": null,
                "fieldConfig": {
                  "defaults": {
                    "custom": {}
                  },
                  "overrides": []
                },
                "gridPos": {
                  "h": 5,
                  "w": 2,
                  "x": 0,
                  "y": 1
                },
                "id": 5,
                "options": {
                  "content": "<img src=\"https://argoproj.github.io/static/argo-wheel.23b3ad84.png\" />",
                  "mode": "html"
                },
                "pluginVersion": "7.4.2",
                "targets": [
                  {
                    "queryType": "randomWalk",
                    "refId": "A"
                  }
                ],
                "timeFrom": null,
                "timeShift": null,
                "title": "",
                "type": "text"
              },
              {
                "datasource": "${DS_PROMETHEUS}",
                "fieldConfig": {
                  "defaults": {
                    "color": {
                      "mode": "thresholds"
                    },
                    "custom": {},
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "green",
                          "value": null
                        },
                        {
                          "color": "orange",
                          "value": 1
                        }
                      ]
                    }
                  },
                  "overrides": []
                },
                "gridPos": {
                  "h": 6,
                  "w": 3,
                  "x": 2,
                  "y": 1
                },
                "id": 10,
                "options": {
                  "colorMode": "value",
                  "graphMode": "area",
                  "justifyMode": "auto",
                  "orientation": "auto",
                  "reduceOptions": {
                    "calcs": [
                      "lastNotNull"
                    ],
                    "fields": "",
                    "values": false
                  },
                  "text": {},
                  "textMode": "auto"
                },
                "pluginVersion": "7.4.2",
                "targets": [
                  {
                    "expr": "argo_workflows_count{kubernetes_namespace=~\"$ns\",status=\"Pending\"} ",
                    "instant": true,
                    "interval": "",
                    "legendFormat": "",
                    "queryType": "randomWalk",
                    "refId": "A"
                  }
                ],
                "title": "WF Pending",
                "transparent": true,
                "type": "stat"
              },
              {
                "datasource": "${DS_PROMETHEUS}",
                "fieldConfig": {
                  "defaults": {
                    "color": {
                      "mode": "thresholds"
                    },
                    "custom": {},
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "green",
                          "value": null
                        },
                        {
                          "color": "#EAB839",
                          "value": 1
                        }
                      ]
                    }
                  },
                  "overrides": []
                },
                "gridPos": {
                  "h": 6,
                  "w": 3,
                  "x": 5,
                  "y": 1
                },
                "id": 11,
                "options": {
                  "colorMode": "value",
                  "graphMode": "area",
                  "justifyMode": "auto",
                  "orientation": "auto",
                  "reduceOptions": {
                    "calcs": [
                      "lastNotNull"
                    ],
                    "fields": "",
                    "values": false
                  },
                  "text": {},
                  "textMode": "auto"
                },
                "pluginVersion": "7.4.2",
                "targets": [
                  {
                    "expr": "argo_workflows_count{kubernetes_namespace=~\"$ns\",status=\"Running\"}",
                    "instant": true,
                    "interval": "",
                    "legendFormat": "",
                    "queryType": "randomWalk",
                    "refId": "A"
                  }
                ],
                "title": "WF Running",
                "transparent": true,
                "type": "stat"
              },
              {
                "datasource": "${DS_PROMETHEUS}",
                "fieldConfig": {
                  "defaults": {
                    "color": {
                      "mode": "thresholds"
                    },
                    "custom": {},
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "green",
                          "value": null
                        },
                        {
                          "color": "red",
                          "value": 1
                        }
                      ]
                    }
                  },
                  "overrides": []
                },
                "gridPos": {
                  "h": 6,
                  "w": 3,
                  "x": 8,
                  "y": 1
                },
                "id": 8,
                "options": {
                  "colorMode": "value",
                  "graphMode": "area",
                  "justifyMode": "auto",
                  "orientation": "auto",
                  "reduceOptions": {
                    "calcs": [
                      "lastNotNull"
                    ],
                    "fields": "",
                    "values": false
                  },
                  "text": {},
                  "textMode": "auto"
                },
                "pluginVersion": "7.4.2",
                "targets": [
                  {
                    "expr": "argo_workflows_count{kubernetes_namespace=~\"$ns\",status=\"Error\"}",
                    "instant": true,
                    "interval": "",
                    "legendFormat": "",
                    "queryType": "randomWalk",
                    "refId": "A"
                  }
                ],
                "title": "WF Errors",
                "transparent": true,
                "type": "stat"
              },
              {
                "datasource": "${DS_PROMETHEUS}",
                "fieldConfig": {
                  "defaults": {
                    "color": {
                      "mode": "thresholds"
                    },
                    "custom": {},
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "green",
                          "value": null
                        },
                        {
                          "color": "red",
                          "value": 1
                        }
                      ]
                    }
                  },
                  "overrides": []
                },
                "gridPos": {
                  "h": 6,
                  "w": 3,
                  "x": 11,
                  "y": 1
                },
                "id": 9,
                "options": {
                  "colorMode": "value",
                  "graphMode": "area",
                  "justifyMode": "auto",
                  "orientation": "auto",
                  "reduceOptions": {
                    "calcs": [
                      "lastNotNull"
                    ],
                    "fields": "",
                    "values": false
                  },
                  "text": {},
                  "textMode": "auto"
                },
                "pluginVersion": "7.4.2",
                "targets": [
                  {
                    "expr": "argo_workflows_count{kubernetes_namespace=~\"$ns\",status=\"Failed\"}",
                    "instant": true,
                    "interval": "",
                    "legendFormat": "",
                    "queryType": "randomWalk",
                    "refId": "A"
                  }
                ],
                "title": "WF Failed",
                "transparent": true,
                "type": "stat"
              },
              {
                "datasource": "${DS_PROMETHEUS}",
                "fieldConfig": {
                  "defaults": {
                    "color": {
                      "mode": "thresholds"
                    },
                    "custom": {},
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "green",
                          "value": null
                        },
                        {
                          "color": "red",
                          "value": 80
                        }
                      ]
                    }
                  },
                  "overrides": []
                },
                "gridPos": {
                  "h": 6,
                  "w": 3,
                  "x": 14,
                  "y": 1
                },
                "id": 12,
                "options": {
                  "colorMode": "value",
                  "graphMode": "area",
                  "justifyMode": "auto",
                  "orientation": "auto",
                  "reduceOptions": {
                    "calcs": [
                      "lastNotNull"
                    ],
                    "fields": "",
                    "values": false
                  },
                  "text": {},
                  "textMode": "auto"
                },
                "pluginVersion": "7.4.2",
                "targets": [
                  {
                    "expr": "argo_workflows_count{kubernetes_namespace=~\"$ns\",status=\"Skipped\"}",
                    "instant": true,
                    "interval": "",
                    "legendFormat": "",
                    "queryType": "randomWalk",
                    "refId": "A"
                  }
                ],
                "title": "WF Skipped",
                "transparent": true,
                "type": "stat"
              },
              {
                "datasource": "${DS_PROMETHEUS}",
                "fieldConfig": {
                  "defaults": {
                    "color": {
                      "mode": "thresholds"
                    },
                    "custom": {},
                    "mappings": [],
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "green",
                          "value": null
                        }
                      ]
                    }
                  },
                  "overrides": []
                },
                "gridPos": {
                  "h": 6,
                  "w": 3,
                  "x": 17,
                  "y": 1
                },
                "id": 13,
                "options": {
                  "colorMode": "value",
                  "graphMode": "area",
                  "justifyMode": "auto",
                  "orientation": "auto",
                  "reduceOptions": {
                    "calcs": [
                      "lastNotNull"
                    ],
                    "fields": "",
                    "values": false
                  },
                  "text": {},
                  "textMode": "auto"
                },
                "pluginVersion": "7.4.2",
                "targets": [
                  {
                    "expr": "argo_workflows_count{kubernetes_namespace=~\"$ns\",status=\"Succeeded\"}",
                    "instant": true,
                    "interval": "",
                    "legendFormat": "",
                    "queryType": "randomWalk",
                    "refId": "A"
                  }
                ],
                "title": "WF Succeeded",
                "transparent": true,
                "type": "stat"
              },
              {
                "collapsed": false,
                "datasource": null,
                "gridPos": {
                  "h": 1,
                  "w": 24,
                  "x": 0,
                  "y": 7
                },
                "id": 18,
                "panels": [],
                "title": "Number of Workflows currently accessible by the controller by status",
                "type": "row"
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "${DS_PROMETHEUS}",
                "decimals": 0,
                "fieldConfig": {
                  "defaults": {
                    "custom": {}
                  },
                  "overrides": []
                },
                "fill": 0,
                "fillGradient": 1,
                "gridPos": {
                  "h": 9,
                  "w": 12,
                  "x": 0,
                  "y": 8
                },
                "hiddenSeries": false,
                "id": 2,
                "legend": {
                  "alignAsTable": true,
                  "avg": false,
                  "current": true,
                  "hideEmpty": true,
                  "max": true,
                  "min": false,
                  "rightSide": false,
                  "show": true,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 2,
                "nullPointMode": "null",
                "options": {
                  "alertThreshold": true
                },
                "percentage": false,
                "pluginVersion": "7.4.2",
                "pointradius": 2,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "argo_workflows_count{status!~\"(Error|Failed)\",kubernetes_namespace=~\"$ns\"}",
                    "interval": "",
                    "legendFormat": "{{app}} : {{kubernetes_namespace}} : {{status}}",
                    "queryType": "randomWalk",
                    "refId": "A"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeRegions": [],
                "timeShift": null,
                "title": "Workflow Status  ",
                "tooltip": {
                  "shared": false,
                  "sort": 2,
                  "value_type": "individual"
                },
                "transparent": true,
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "$$hashKey": "object:151",
                    "decimals": 0,
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "$$hashKey": "object:152",
                    "decimals": null,
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ],
                "yaxis": {
                  "align": false,
                  "alignLevel": null
                }
              },
              {
                "alert": {
                  "alertRuleTags": {},
                  "conditions": [
                    {
                      "evaluator": {
                        "params": [
                          0
                        ],
                        "type": "gt"
                      },
                      "operator": {
                        "type": "and"
                      },
                      "query": {
                        "params": [
                          "A",
                          "5m",
                          "now"
                        ]
                      },
                      "reducer": {
                        "params": [],
                        "type": "last"
                      },
                      "type": "query"
                    }
                  ],
                  "executionErrorState": "alerting",
                  "for": "5m",
                  "frequency": "1m",
                  "handler": 1,
                  "name": "argowf failures",
                  "noDataState": "no_data",
                  "notifications": []
                },
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "${DS_PROMETHEUS}",
                "decimals": 0,
                "fieldConfig": {
                  "defaults": {
                    "custom": {}
                  },
                  "overrides": []
                },
                "fill": 0,
                "fillGradient": 1,
                "gridPos": {
                  "h": 9,
                  "w": 12,
                  "x": 12,
                  "y": 8
                },
                "hiddenSeries": false,
                "id": 29,
                "legend": {
                  "alignAsTable": true,
                  "avg": false,
                  "current": true,
                  "hideEmpty": true,
                  "max": true,
                  "min": false,
                  "rightSide": false,
                  "show": true,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 2,
                "nullPointMode": "null",
                "options": {
                  "alertThreshold": true
                },
                "percentage": false,
                "pluginVersion": "7.4.2",
                "pointradius": 2,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "argo_workflows_count{status=~\"(Error|Failed)\"}",
                    "interval": "",
                    "legendFormat": "{{app}} : {{kubernetes_namespace}} : {{status}}",
                    "queryType": "randomWalk",
                    "refId": "A"
                  }
                ],
                "thresholds": [
                  {
                    "colorMode": "critical",
                    "fill": true,
                    "line": true,
                    "op": "gt",
                    "value": 0,
                    "visible": true
                  }
                ],
                "timeFrom": null,
                "timeRegions": [],
                "timeShift": null,
                "title": "Workflow Errors Alerting ",
                "tooltip": {
                  "shared": false,
                  "sort": 2,
                  "value_type": "individual"
                },
                "transparent": true,
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "$$hashKey": "object:151",
                    "decimals": 0,
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "$$hashKey": "object:152",
                    "decimals": null,
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ],
                "yaxis": {
                  "align": false,
                  "alignLevel": null
                }
              },
              {
                "collapsed": false,
                "datasource": null,
                "gridPos": {
                  "h": 1,
                  "w": 24,
                  "x": 0,
                  "y": 17
                },
                "id": 20,
                "panels": [],
                "title": "Histogram of durations of operations",
                "type": "row"
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "${DS_PROMETHEUS}",
                "decimals": 2,
                "fieldConfig": {
                  "defaults": {
                    "custom": {}
                  },
                  "overrides": []
                },
                "fill": 1,
                "fillGradient": 1,
                "gridPos": {
                  "h": 9,
                  "w": 24,
                  "x": 0,
                  "y": 18
                },
                "hiddenSeries": false,
                "id": 14,
                "legend": {
                  "alignAsTable": true,
                  "avg": true,
                  "current": true,
                  "hideEmpty": true,
                  "max": true,
                  "min": true,
                  "rightSide": false,
                  "show": true,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 1,
                "nullPointMode": "null",
                "options": {
                  "alertThreshold": true
                },
                "percentage": false,
                "pluginVersion": "7.4.2",
                "pointradius": 2,
                "points": true,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "histogram_quantile(0.95, sum(rate(argo_workflows_operation_duration_seconds_bucket{kubernetes_namespace=~\"^$ns$\"}[5m])) by (le)) ",
                    "interval": "",
                    "legendFormat": "95th percentile",
                    "refId": "B"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeRegions": [],
                "timeShift": null,
                "title": "Workflow operation duration",
                "tooltip": {
                  "shared": false,
                  "sort": 2,
                  "value_type": "individual"
                },
                "transparent": true,
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "$$hashKey": "object:151",
                    "decimals": 2,
                    "format": "s",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "$$hashKey": "object:152",
                    "decimals": null,
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ],
                "yaxis": {
                  "align": false,
                  "alignLevel": null
                }
              },
              {
                "collapsed": false,
                "datasource": null,
                "gridPos": {
                  "h": 1,
                  "w": 24,
                  "x": 0,
                  "y": 27
                },
                "id": 22,
                "panels": [],
                "title": "Adds to the queue",
                "type": "row"
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "${DS_PROMETHEUS}",
                "decimals": 2,
                "fieldConfig": {
                  "defaults": {
                    "custom": {}
                  },
                  "overrides": []
                },
                "fill": 1,
                "fillGradient": 1,
                "gridPos": {
                  "h": 9,
                  "w": 24,
                  "x": 0,
                  "y": 28
                },
                "hiddenSeries": false,
                "id": 15,
                "legend": {
                  "alignAsTable": true,
                  "avg": false,
                  "current": true,
                  "hideEmpty": true,
                  "max": true,
                  "min": false,
                  "rightSide": false,
                  "show": true,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 2,
                "nullPointMode": "null",
                "options": {
                  "alertThreshold": true
                },
                "percentage": false,
                "pluginVersion": "7.4.2",
                "pointradius": 2,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "delta(argo_workflows_queue_adds_count{kubernetes_namespace=~\"$ns\"}[2m])",
                    "interval": "",
                    "legendFormat": "{{app}} : {{kubernetes_namespace}} : {{queue_name}}",
                    "queryType": "randomWalk",
                    "refId": "A"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeRegions": [],
                "timeShift": null,
                "title": "Workflow queue adds ",
                "tooltip": {
                  "shared": false,
                  "sort": 2,
                  "value_type": "individual"
                },
                "transparent": true,
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "$$hashKey": "object:151",
                    "decimals": 2,
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "$$hashKey": "object:152",
                    "decimals": null,
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ],
                "yaxis": {
                  "align": false,
                  "alignLevel": null
                }
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "${DS_PROMETHEUS}",
                "decimals": 2,
                "fieldConfig": {
                  "defaults": {
                    "custom": {}
                  },
                  "overrides": []
                },
                "fill": 1,
                "fillGradient": 1,
                "gridPos": {
                  "h": 9,
                  "w": 12,
                  "x": 0,
                  "y": 37
                },
                "hiddenSeries": false,
                "id": 16,
                "legend": {
                  "alignAsTable": true,
                  "avg": false,
                  "current": true,
                  "hideEmpty": true,
                  "max": true,
                  "min": false,
                  "rightSide": false,
                  "show": true,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 2,
                "nullPointMode": "null",
                "options": {
                  "alertThreshold": true
                },
                "percentage": false,
                "pluginVersion": "7.4.2",
                "pointradius": 2,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "argo_workflows_queue_depth_count{kubernetes_namespace=~\"$ns\"}",
                    "interval": "",
                    "legendFormat": "{{app}} : {{kubernetes_namespace}} : {{queue_name}}",
                    "queryType": "randomWalk",
                    "refId": "A"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeRegions": [],
                "timeShift": null,
                "title": "Depth of the queue",
                "tooltip": {
                  "shared": false,
                  "sort": 2,
                  "value_type": "individual"
                },
                "transparent": true,
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "$$hashKey": "object:151",
                    "decimals": 2,
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": "0",
                    "show": true
                  },
                  {
                    "$$hashKey": "object:152",
                    "decimals": null,
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ],
                "yaxis": {
                  "align": false,
                  "alignLevel": null
                }
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "${DS_PROMETHEUS}",
                "decimals": 2,
                "fieldConfig": {
                  "defaults": {
                    "custom": {}
                  },
                  "overrides": []
                },
                "fill": 0,
                "fillGradient": 1,
                "gridPos": {
                  "h": 9,
                  "w": 12,
                  "x": 12,
                  "y": 37
                },
                "hiddenSeries": false,
                "id": 23,
                "legend": {
                  "alignAsTable": true,
                  "avg": false,
                  "current": true,
                  "hideEmpty": true,
                  "max": true,
                  "min": false,
                  "rightSide": false,
                  "show": true,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 1,
                "nullPointMode": "null",
                "options": {
                  "alertThreshold": true
                },
                "percentage": false,
                "pluginVersion": "7.4.2",
                "pointradius": 2,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "  rate(argo_workflows_queue_latency_sum{queue_name=\"cron_wf_queue\",kubernetes_namespace=~\"^$ns$\"}[5m])\n/\n  rate(argo_workflows_queue_latency_count{queue_name=\"cron_wf_queue\",kubernetes_namespace=~\"^$ns$\"}[5m])",
                    "interval": "2m",
                    "legendFormat": "{{app}} : {{kubernetes_namespace}} : {{queue_name}}",
                    "queryType": "randomWalk",
                    "refId": "A"
                  },
                  {
                    "expr": "  rate(argo_workflows_queue_latency_sum{queue_name=\"pod_queue\",kubernetes_namespace=~\"^$ns$\"}[5m])\n/\n  rate(argo_workflows_queue_latency_count{queue_name=\"pod_queue\",kubernetes_namespace=~\"^$ns$\"}[5m])",
                    "interval": "",
                    "legendFormat": "{{app}} : {{kubernetes_namespace}} : {{queue_name}}",
                    "refId": "B"
                  },
                  {
                    "expr": "  rate(argo_workflows_queue_latency_sum{queue_name=\"wf_cron_queue\",kubernetes_namespace=~\"^$ns$\"}[5m])\n/\n  rate(argo_workflows_queue_latency_count{queue_name=\"wf_cron_queue\",kubernetes_namespace=~\"^$ns$\"}[5m])",
                    "hide": false,
                    "interval": "",
                    "legendFormat": "{{app}} : {{kubernetes_namespace}} : {{queue_name}}",
                    "refId": "C"
                  },
                  {
                    "expr": "  rate(argo_workflows_queue_latency_sum{queue_name=\"workflow_queue\",kubernetes_namespace=~\"^$ns$\"}[5m])\n/\n  rate(argo_workflows_queue_latency_count{queue_name=\"workflow_queue\",kubernetes_namespace=~\"^$ns$\"}[5m])",
                    "hide": false,
                    "interval": "",
                    "legendFormat": "{{app}} : {{kubernetes_namespace}} : {{queue_name}}",
                    "refId": "D"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeRegions": [],
                "timeShift": null,
                "title": "Time objects spend waiting in the queue",
                "tooltip": {
                  "shared": false,
                  "sort": 2,
                  "value_type": "individual"
                },
                "transparent": true,
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "$$hashKey": "object:151",
                    "decimals": 2,
                    "format": "s",
                    "label": "avg",
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "$$hashKey": "object:152",
                    "decimals": null,
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ],
                "yaxis": {
                  "align": false,
                  "alignLevel": null
                }
              },
              {
                "collapsed": false,
                "datasource": null,
                "gridPos": {
                  "h": 1,
                  "w": 24,
                  "x": 0,
                  "y": 46
                },
                "id": 25,
                "panels": [],
                "title": "Total number of log messages",
                "type": "row"
              },
              {
                "aliasColors": {},
                "bars": true,
                "dashLength": 10,
                "dashes": false,
                "datasource": "${DS_PROMETHEUS}",
                "decimals": 2,
                "description": "",
                "fieldConfig": {
                  "defaults": {
                    "custom": {}
                  },
                  "overrides": []
                },
                "fill": 1,
                "fillGradient": 1,
                "gridPos": {
                  "h": 9,
                  "w": 24,
                  "x": 0,
                  "y": 47
                },
                "hiddenSeries": false,
                "id": 26,
                "legend": {
                  "alignAsTable": true,
                  "avg": false,
                  "current": true,
                  "hideEmpty": true,
                  "max": true,
                  "min": false,
                  "rightSide": false,
                  "show": true,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": false,
                "linewidth": 2,
                "nullPointMode": "null",
                "options": {
                  "alertThreshold": true
                },
                "percentage": false,
                "pluginVersion": "7.4.2",
                "pointradius": 2,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "expr": "rate(log_messages{kubernetes_namespace=~\"$ns\"}[2m])",
                    "interval": "",
                    "legendFormat": "{{app}} : {{kubernetes_namespace}} : {{level}}",
                    "queryType": "randomWalk",
                    "refId": "A"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeRegions": [],
                "timeShift": null,
                "title": "Log messages",
                "tooltip": {
                  "shared": false,
                  "sort": 2,
                  "value_type": "individual"
                },
                "transparent": true,
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "$$hashKey": "object:151",
                    "decimals": 2,
                    "format": "short",
                    "label": "count/sec",
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "$$hashKey": "object:152",
                    "decimals": null,
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ],
                "yaxis": {
                  "align": false,
                  "alignLevel": null
                }
              }
            ],
            "refresh": "1m",
            "schemaVersion": 27,
            "style": "dark",
            "tags": [],
            "templating": {
              "list": [
                {
                  "allValue": null,
                  "current": {},
                  "datasource": "${DS_PROMETHEUS}",
                  "definition": "label_values(argo_workflows_count,kubernetes_namespace) ",
                  "description": "Kubernetes namespace",
                  "error": null,
                  "hide": 0,
                  "includeAll": false,
                  "label": "k8s_ns",
                  "multi": false,
                  "name": "ns",
                  "options": [],
                  "query": {
                    "query": "label_values(argo_workflows_count,kubernetes_namespace) ",
                    "refId": "StandardVariableQuery"
                  },
                  "refresh": 2,
                  "regex": "",
                  "skipUrlSync": false,
                  "sort": 0,
                  "tagValuesQuery": "",
                  "tags": [],
                  "tagsQuery": "",
                  "type": "query",
                  "useTags": false
                }
              ]
            },
            "time": {
              "from": "now-3h",
              "to": "now"
            },
            "timepicker": {},
            "timezone": "",
            "title": "ArgoWorkflow Metrics",
            "uid": "VkxHyjPMk",
            "version": 35
          }
        #gnetId: 13927
        #revision: 2
        #datasource: Prometheus
      spark:
        json: |
          {
            "annotations": {
              "list": [
                {
                  "builtIn": 1,
                  "datasource": "-- Grafana --",
                  "enable": true,
                  "hide": true,
                  "iconColor": "rgba(0, 211, 255, 1)",
                  "name": "Annotations & Alerts",
                  "type": "dashboard"
                }
              ]
            },
            "description": "Spark Executors and Driver Level Metrics with filtering by service",
            "editable": true,
            "gnetId": null,
            "graphTooltip": 0,
            "iteration": 1622908092723,
            "links": [],
            "panels": [
              {
                "collapsed": false,
                "datasource": null,
                "gridPos": {
                  "h": 1,
                  "w": 24,
                  "x": 0,
                  "y": 0
                },
                "id": 155,
                "panels": [],
                "title": "Overview",
                "type": "row"
              },
              {
                "cacheTimeout": null,
                "datasource": null,
                "fieldConfig": {
                  "defaults": {
                    "color": {
                      "mode": "thresholds"
                    },
                    "decimals": 1,
                    "mappings": [
                      {
                        "id": 0,
                        "op": "=",
                        "text": "N/A",
                        "type": 1,
                        "value": "null"
                      }
                    ],
                    "max": 1,
                    "min": 0,
                    "thresholds": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "#299c46",
                          "value": null
                        },
                        {
                          "color": "rgba(237, 129, 40, 0.89)",
                          "value": 0.5
                        },
                        {
                          "color": "#d44a3a",
                          "value": 0.9
                        }
                      ]
                    },
                    "unit": "percentunit"
                  },
                  "overrides": []
                },
                "gridPos": {
                  "h": 9,
                  "w": 5,
                  "x": 0,
                  "y": 1
                },
                "id": 147,
                "interval": null,
                "links": [],
                "maxDataPoints": 100,
                "options": {
                  "orientation": "horizontal",
                  "reduceOptions": {
                    "calcs": [
                      "lastNotNull"
                    ],
                    "fields": "",
                    "values": false
                  },
                  "showThresholdLabels": false,
                  "showThresholdMarkers": true,
                  "text": {}
                },
                "pluginVersion": "7.5.5",
                "targets": [
                  {
                    "exemplar": true,
                    "expr": "count(count(kube_pod_info and on(pod) (kube_pod_status_phase{phase=\"Running\"} == 1) and on(pod) (kube_pod_labels{label_spark_role=\"executor\"})) by (node)) / count(kube_node_labels and on(pod) (kube_pod_status_phase{phase=\"Running\"} == 1))",
                    "format": "time_series",
                    "interval": "",
                    "intervalFactor": 1,
                    "legendFormat": "",
                    "refId": "A"
                  }
                ],
                "title": "% of nodes utilized",
                "type": "gauge"
              },
              {
                "cacheTimeout": null,
                "colorBackground": true,
                "colorValue": false,
                "colors": [
                  "#d44a3a",
                  "rgba(237, 129, 40, 0.89)",
                  "#299c46"
                ],
                "datasource": null,
                "fieldConfig": {
                  "defaults": {},
                  "overrides": []
                },
                "format": "percentunit",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "gridPos": {
                  "h": 9,
                  "w": 5,
                  "x": 5,
                  "y": 1
                },
                "id": 151,
                "interval": null,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "50%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "sparkline": {
                  "fillColor": "rgba(255, 255, 255, 0.18)",
                  "full": false,
                  "lineColor": "rgb(255, 255, 255)",
                  "show": true
                },
                "tableColumn": "",
                "targets": [
                  {
                    "exemplar": true,
                    "expr": "(sum(\n    (sum(rate(container_cpu_usage_seconds_total{}[1m])) by (pod, namespace))\n    and on(pod) kube_pod_labels{label_spark_role=\"executor\"} \n    and on(pod) (kube_pod_status_phase{phase=\"Running\"} == 1)))\n/ \n(sum(\n    (sum(kube_pod_container_resource_requests{resource=\"cpu\"}) by (pod, namespace))\n    and on(pod) kube_pod_labels{label_spark_role=\"executor\"} \n    and on(pod) (kube_pod_status_phase{phase=\"Running\"} == 1)))",
                    "format": "time_series",
                    "interval": "",
                    "intervalFactor": 1,
                    "legendFormat": "",
                    "refId": "A"
                  }
                ],
                "thresholds": "0.3,0.8",
                "title": "CPU utilization %",
                "type": "singlestat",
                "valueFontSize": "200%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "0",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": true,
                "colorValue": false,
                "colors": [
                  "#d44a3a",
                  "rgba(237, 129, 40, 0.89)",
                  "#299c46"
                ],
                "datasource": null,
                "fieldConfig": {
                  "defaults": {},
                  "overrides": []
                },
                "format": "percentunit",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "gridPos": {
                  "h": 9,
                  "w": 5,
                  "x": 10,
                  "y": 1
                },
                "id": 149,
                "interval": null,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "50%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "sparkline": {
                  "fillColor": "rgba(255, 255, 255, 0.18)",
                  "full": false,
                  "lineColor": "rgb(255, 255, 255)",
                  "show": true
                },
                "tableColumn": "",
                "targets": [
                  {
                    "exemplar": true,
                    "expr": "sum(\n   (sum(container_memory_working_set_bytes{}) by (pod, namespace))\n   and on(pod) kube_pod_labels{label_spark_role=\"executor\"} \n   and on(pod) (kube_pod_status_phase{phase=\"Running\"} == 1))\n/ \nsum(\n   (sum(kube_pod_container_resource_requests{resource=\"memory\"}) by (pod, namespace))\n   and on(pod) kube_pod_labels{label_spark_role=\"executor\"} \n   and on(pod) (kube_pod_status_phase{phase=\"Running\"} == 1))",
                    "format": "time_series",
                    "interval": "",
                    "intervalFactor": 1,
                    "legendFormat": "",
                    "refId": "A"
                  }
                ],
                "thresholds": "0.3,0.8",
                "title": "Memory utilization %",
                "type": "singlestat",
                "valueFontSize": "200%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "0",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": false,
                "colors": [
                  "#299c46",
                  "rgba(237, 129, 40, 0.89)",
                  "#d44a3a"
                ],
                "datasource": "default",
                "description": "",
                "fieldConfig": {
                  "defaults": {},
                  "overrides": []
                },
                "format": "none",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "gridPos": {
                  "h": 9,
                  "w": 3,
                  "x": 15,
                  "y": 1
                },
                "hideTimeOverride": true,
                "id": 135,
                "interval": null,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "50%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "#badff4",
                  "show": true
                },
                "tableColumn": "",
                "targets": [
                  {
                    "exemplar": true,
                    "expr": "sum(kube_pod_labels{label_spark_role=\"driver\",label_sparkoperator_k8s_io_app_name=~\"$app_name\"})",
                    "format": "time_series",
                    "interval": "",
                    "intervalFactor": 1,
                    "legendFormat": "",
                    "refId": "A"
                  }
                ],
                "thresholds": "",
                "timeFrom": "10s",
                "title": "Drivers Running",
                "type": "singlestat",
                "valueFontSize": "150%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "0",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "cacheTimeout": null,
                "colorBackground": false,
                "colorValue": false,
                "colors": [
                  "#299c46",
                  "rgba(237, 129, 40, 0.89)",
                  "#d44a3a"
                ],
                "datasource": "default",
                "description": "",
                "fieldConfig": {
                  "defaults": {},
                  "overrides": []
                },
                "format": "none",
                "gauge": {
                  "maxValue": 100,
                  "minValue": 0,
                  "show": false,
                  "thresholdLabels": false,
                  "thresholdMarkers": true
                },
                "gridPos": {
                  "h": 9,
                  "w": 3,
                  "x": 18,
                  "y": 1
                },
                "hideTimeOverride": true,
                "id": 33,
                "interval": null,
                "links": [],
                "mappingType": 1,
                "mappingTypes": [
                  {
                    "name": "value to text",
                    "value": 1
                  },
                  {
                    "name": "range to text",
                    "value": 2
                  }
                ],
                "maxDataPoints": 100,
                "nullPointMode": "connected",
                "nullText": null,
                "postfix": "",
                "postfixFontSize": "50%",
                "prefix": "",
                "prefixFontSize": "50%",
                "rangeMaps": [
                  {
                    "from": "null",
                    "text": "N/A",
                    "to": "null"
                  }
                ],
                "sparkline": {
                  "fillColor": "rgba(31, 118, 189, 0.18)",
                  "full": false,
                  "lineColor": "#badff4",
                  "show": true
                },
                "tableColumn": "",
                "targets": [
                  {
                    "exemplar": true,
                    "expr": "sum(kube_pod_labels{label_spark_role=\"executor\",label_sparkoperator_k8s_io_app_name=~\"$app_name\"})",
                    "format": "time_series",
                    "interval": "",
                    "intervalFactor": 1,
                    "legendFormat": "",
                    "refId": "A"
                  }
                ],
                "thresholds": "",
                "timeFrom": "10s",
                "title": "Executors Running",
                "type": "singlestat",
                "valueFontSize": "150%",
                "valueMaps": [
                  {
                    "op": "=",
                    "text": "0",
                    "value": "null"
                  }
                ],
                "valueName": "current"
              },
              {
                "collapsed": false,
                "datasource": null,
                "gridPos": {
                  "h": 1,
                  "w": 24,
                  "x": 0,
                  "y": 10
                },
                "id": 153,
                "panels": [],
                "title": "Namespace Performance",
                "type": "row"
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": null,
                "decimals": 2,
                "fieldConfig": {
                  "defaults": {},
                  "overrides": []
                },
                "fill": 1,
                "fillGradient": 0,
                "gridPos": {
                  "h": 10,
                  "w": 7,
                  "x": 0,
                  "y": 11
                },
                "hiddenSeries": false,
                "id": 145,
                "legend": {
                  "alignAsTable": true,
                  "avg": false,
                  "current": true,
                  "max": true,
                  "min": false,
                  "rightSide": false,
                  "show": true,
                  "sideWidth": 400,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "options": {
                  "alertThreshold": true
                },
                "percentage": false,
                "pluginVersion": "7.5.5",
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "exemplar": true,
                    "expr": "(sum(\n    (sum(rate(container_network_receive_bytes_total{}[1m])) by (pod, namespace))\n    and on(pod) kube_pod_labels{label_spark_role=\"executor\"} \n    and on(pod) (kube_pod_status_phase{phase=\"Running\"} == 1))\nby (namespace))",
                    "format": "time_series",
                    "hide": false,
                    "interval": "",
                    "intervalFactor": 1,
                    "legendFormat": "IN {{ namespace }}",
                    "refId": "A"
                  },
                  {
                    "exemplar": true,
                    "expr": "- (sum(\n    (sum(rate(container_network_transmit_bytes_total{}[1m])) by (pod, namespace))\n    and on(pod) kube_pod_labels{label_spark_role=\"executor\"} \n    and on(pod) (kube_pod_status_phase{phase=\"Running\"} == 1))\nby (namespace))",
                    "format": "time_series",
                    "hide": false,
                    "interval": "",
                    "intervalFactor": 1,
                    "legendFormat": "OUT {{ namespace }}",
                    "refId": "B"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeRegions": [],
                "timeShift": null,
                "title": "Network I/O pressure",
                "tooltip": {
                  "shared": true,
                  "sort": 2,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "$$hashKey": "object:602",
                    "decimals": null,
                    "format": "Bps",
                    "label": "",
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "$$hashKey": "object:603",
                    "format": "short",
                    "label": "",
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": false
                  }
                ],
                "yaxis": {
                  "align": false,
                  "alignLevel": 0
                }
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": null,
                "fieldConfig": {
                  "defaults": {},
                  "overrides": []
                },
                "fill": 1,
                "fillGradient": 0,
                "gridPos": {
                  "h": 10,
                  "w": 7,
                  "x": 7,
                  "y": 11
                },
                "hiddenSeries": false,
                "id": 141,
                "legend": {
                  "alignAsTable": true,
                  "avg": false,
                  "current": true,
                  "max": true,
                  "min": false,
                  "rightSide": false,
                  "show": true,
                  "sideWidth": 400,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "options": {
                  "alertThreshold": true
                },
                "percentage": false,
                "pluginVersion": "7.5.5",
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [
                  {}
                ],
                "spaceLength": 10,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "exemplar": true,
                    "expr": "(sum(\n    (sum(container_memory_working_set_bytes{}) by (pod, namespace))\n    and on(pod) kube_pod_labels{label_spark_role=\"executor\"} \n    and on(pod) (kube_pod_status_phase{phase=\"Running\"} == 1))\nby (namespace) /1024 / 1024 / 1024) \n/ \n(sum(\n    (sum(kube_pod_container_resource_requests{resource=\"memory\"}) by (pod, namespace))\n    and on(pod) kube_pod_labels{label_spark_role=\"executor\"} \n    and on(pod) (kube_pod_status_phase{phase=\"Running\"} == 1)) \nby (namespace) / 1024 / 1024 / 1024)",
                    "format": "time_series",
                    "hide": false,
                    "interval": "",
                    "intervalFactor": 1,
                    "legendFormat": "{{ namespace }}",
                    "refId": "A"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeRegions": [],
                "timeShift": null,
                "title": "Memory utilization %",
                "tooltip": {
                  "shared": true,
                  "sort": 2,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "$$hashKey": "object:510",
                    "format": "percentunit",
                    "label": "",
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "$$hashKey": "object:511",
                    "format": "short",
                    "label": "",
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ],
                "yaxis": {
                  "align": false,
                  "alignLevel": null
                }
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": null,
                "decimals": 2,
                "fieldConfig": {
                  "defaults": {},
                  "overrides": []
                },
                "fill": 1,
                "fillGradient": 0,
                "gridPos": {
                  "h": 10,
                  "w": 7,
                  "x": 14,
                  "y": 11
                },
                "hiddenSeries": false,
                "id": 143,
                "legend": {
                  "alignAsTable": true,
                  "avg": false,
                  "current": true,
                  "max": true,
                  "min": false,
                  "rightSide": false,
                  "show": true,
                  "sideWidth": 400,
                  "sort": "current",
                  "sortDesc": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "options": {
                  "alertThreshold": true
                },
                "percentage": false,
                "pluginVersion": "7.5.5",
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "exemplar": true,
                    "expr": "(sum(\n    (sum(rate(container_cpu_usage_seconds_total{}[1m])) by (pod, namespace))\n    and on(pod) kube_pod_labels{label_spark_role=\"executor\"} \n    and on(pod) (kube_pod_status_phase{phase=\"Running\"} == 1))\nby (namespace))\n/ \n(sum(\n    (sum(kube_pod_container_resource_requests{resource=\"cpu\"}) by (pod, namespace))\n    and on(pod) kube_pod_labels{label_spark_role=\"executor\"} \n    and on(pod) (kube_pod_status_phase{phase=\"Running\"} == 1))\nby (namespace))",
                    "format": "time_series",
                    "hide": false,
                    "interval": "",
                    "intervalFactor": 1,
                    "legendFormat": "{{ namespace }}",
                    "refId": "A"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeRegions": [],
                "timeShift": null,
                "title": "CPU utilization %",
                "tooltip": {
                  "shared": true,
                  "sort": 2,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "$$hashKey": "object:703",
                    "format": "percentunit",
                    "label": "",
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "$$hashKey": "object:704",
                    "format": "short",
                    "label": "",
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ],
                "yaxis": {
                  "align": false,
                  "alignLevel": null
                }
              },
              {
                "collapsed": false,
                "datasource": null,
                "gridPos": {
                  "h": 1,
                  "w": 24,
                  "x": 0,
                  "y": 21
                },
                "id": 23,
                "panels": [],
                "title": "Cluster Metrics",
                "type": "row"
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": "default",
                "fieldConfig": {
                  "defaults": {
                    "links": []
                  },
                  "overrides": []
                },
                "fill": 1,
                "fillGradient": 0,
                "gridPos": {
                  "h": 10,
                  "w": 10,
                  "x": 0,
                  "y": 22
                },
                "hiddenSeries": false,
                "id": 29,
                "legend": {
                  "alignAsTable": true,
                  "avg": false,
                  "current": true,
                  "max": false,
                  "min": false,
                  "show": true,
                  "sort": null,
                  "sortDesc": null,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "options": {
                  "alertThreshold": true
                },
                "percentage": false,
                "pluginVersion": "7.5.5",
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "exemplar": true,
                    "expr": "sum(kube_pod_container_resource_requests{namespace=\"$namespace\", container=\"spark-kubernetes-driver\", pod=~\"($app_name).*\", resource=\"cpu\"}) by (namespace)",
                    "format": "time_series",
                    "hide": false,
                    "interval": "",
                    "intervalFactor": 1,
                    "legendFormat": "CPUs Used by Driver",
                    "refId": "A"
                  },
                  {
                    "exemplar": true,
                    "expr": "sum(kube_pod_container_resource_requests{namespace=\"$namespace\", container=\"spark-kubernetes-executor\", pod=~\"($app_name).*\", resource=\"cpu\"}) by (namespace)",
                    "format": "time_series",
                    "hide": false,
                    "interval": "",
                    "intervalFactor": 1,
                    "legendFormat": "CPUs Used by Executor",
                    "refId": "B"
                  },
                  {
                    "exemplar": true,
                    "expr": "sum(kube_pod_container_resource_requests{namespace=\"$namespace\", pod=~\"($app_name).*\", resource=\"cpu\"}) by (namespace)",
                    "format": "time_series",
                    "hide": false,
                    "interval": "",
                    "intervalFactor": 1,
                    "legendFormat": "Total CPUs Used",
                    "refId": "C"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeRegions": [],
                "timeShift": null,
                "title": "CPUs Used",
                "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "$$hashKey": "object:794",
                    "decimals": 0,
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "$$hashKey": "object:795",
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ],
                "yaxis": {
                  "align": false,
                  "alignLevel": null
                }
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": null,
                "description": "",
                "fieldConfig": {
                  "defaults": {
                    "links": []
                  },
                  "overrides": []
                },
                "fill": 1,
                "fillGradient": 0,
                "gridPos": {
                  "h": 10,
                  "w": 11,
                  "x": 10,
                  "y": 22
                },
                "hiddenSeries": false,
                "id": 31,
                "legend": {
                  "alignAsTable": true,
                  "avg": false,
                  "current": true,
                  "max": false,
                  "min": false,
                  "show": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "options": {
                  "alertThreshold": true
                },
                "percentage": false,
                "pluginVersion": "7.5.5",
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "exemplar": true,
                    "expr": "sum(kube_pod_container_resource_requests{namespace=\"$namespace\", container=\"spark-kubernetes-driver\", pod=~\"($app_name).*\", resource=\"memory\"}) by (namespace)",
                    "format": "time_series",
                    "interval": "",
                    "intervalFactor": 1,
                    "legendFormat": "Mem Used by Driver",
                    "refId": "A"
                  },
                  {
                    "exemplar": true,
                    "expr": "sum(kube_pod_container_resource_requests{namespace=\"$namespace\", container=\"spark-kubernetes-executor\", pod=~\"($app_name).*\", resource=\"memory\"}) by (namespace)",
                    "format": "time_series",
                    "interval": "",
                    "intervalFactor": 1,
                    "legendFormat": "Mem Used by Executors",
                    "refId": "B"
                  },
                  {
                    "exemplar": true,
                    "expr": "sum(kube_pod_container_resource_requests{namespace=\"$namespace\", pod=~\"($app_name).*\", resource=\"memory\"}) by (namespace)",
                    "format": "time_series",
                    "interval": "",
                    "intervalFactor": 1,
                    "legendFormat": "Total Mem Used",
                    "refId": "C"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeRegions": [],
                "timeShift": null,
                "title": "Mem Used",
                "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "$$hashKey": "object:949",
                    "decimals": 0,
                    "format": "decbytes",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "$$hashKey": "object:950",
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ],
                "yaxis": {
                  "align": false,
                  "alignLevel": null
                }
              },
              {
                "collapsed": false,
                "datasource": null,
                "gridPos": {
                  "h": 1,
                  "w": 24,
                  "x": 0,
                  "y": 32
                },
                "id": 130,
                "panels": [],
                "title": "Execution Metrics",
                "type": "row"
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": null,
                "fieldConfig": {
                  "defaults": {},
                  "overrides": []
                },
                "fill": 1,
                "fillGradient": 0,
                "gridPos": {
                  "h": 9,
                  "w": 7,
                  "x": 0,
                  "y": 33
                },
                "hiddenSeries": false,
                "id": 139,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": true,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "nullPointMode": "null",
                "options": {
                  "alertThreshold": true
                },
                "percentage": false,
                "pluginVersion": "7.5.5",
                "pointradius": 2,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "exemplar": true,
                    "expr": "Sum(metrics_executor_JVMOffHeapMemory_bytes{namespace=~\"$namespace\",application_name=~\"$app_name\"} ) by (application_id)",
                    "interval": "",
                    "legendFormat": "{{application_id}}",
                    "refId": "A"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeRegions": [],
                "timeShift": null,
                "title": "Executor Non-Heap Memory",
                "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "$$hashKey": "object:898",
                    "format": "bytes",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "$$hashKey": "object:899",
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ],
                "yaxis": {
                  "align": false,
                  "alignLevel": null
                }
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": null,
                "fieldConfig": {
                  "defaults": {},
                  "overrides": []
                },
                "fill": 1,
                "fillGradient": 0,
                "gridPos": {
                  "h": 9,
                  "w": 7,
                  "x": 7,
                  "y": 33
                },
                "hiddenSeries": false,
                "id": 138,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": true,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "nullPointMode": "null",
                "options": {
                  "alertThreshold": true
                },
                "percentage": false,
                "pluginVersion": "7.5.5",
                "pointradius": 2,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "exemplar": true,
                    "expr": "sum(metrics_executor_JVMHeapMemory_bytes{namespace=~\"$namespace\",application_name=~\"$app_name\"}) by (application_id) ",
                    "interval": "",
                    "legendFormat": "{{application_id}}",
                    "refId": "A"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeRegions": [],
                "timeShift": null,
                "title": "Executor Heap Memory",
                "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "$$hashKey": "object:845",
                    "format": "bytes",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "$$hashKey": "object:846",
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ],
                "yaxis": {
                  "align": false,
                  "alignLevel": null
                }
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": null,
                "fieldConfig": {
                  "defaults": {
                    "links": []
                  },
                  "overrides": []
                },
                "fill": 1,
                "fillGradient": 0,
                "gridPos": {
                  "h": 9,
                  "w": 7,
                  "x": 14,
                  "y": 33
                },
                "hiddenSeries": false,
                "id": 115,
                "legend": {
                  "alignAsTable": true,
                  "avg": false,
                  "current": true,
                  "max": false,
                  "min": false,
                  "rightSide": false,
                  "show": true,
                  "total": false,
                  "values": true
                },
                "lines": true,
                "linewidth": 1,
                "links": [],
                "nullPointMode": "null",
                "options": {
                  "alertThreshold": true
                },
                "percentage": false,
                "pluginVersion": "7.5.5",
                "pointradius": 5,
                "points": false,
                "renderer": "flot",
                "repeatDirection": "v",
                "seriesOverrides": [],
                "spaceLength": 10,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "exemplar": true,
                    "expr": "SUM(metrics_executor_activeTasks{namespace=~\"$namespace\", application_name=~\"$app_name\"})",
                    "format": "time_series",
                    "interval": "",
                    "intervalFactor": 1,
                    "legendFormat": "Active tasks",
                    "refId": "A"
                  },
                  {
                    "exemplar": true,
                    "expr": "SUM(metrics_executor_totalTasks_total{namespace=\"$namespace\", application_name=~\"$app_name\"})",
                    "format": "time_series",
                    "interval": "",
                    "intervalFactor": 1,
                    "legendFormat": "Total tasks",
                    "refId": "B"
                  },
                  {
                    "exemplar": true,
                    "expr": "SUM(metrics_executor_failedTasks_total{namespace=\"$namespace\", application_name=~\"$app_name\"})",
                    "hide": false,
                    "interval": "",
                    "legendFormat": "Failed Tasks",
                    "refId": "C"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeRegions": [],
                "timeShift": null,
                "title": "Tasks",
                "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "$$hashKey": "object:792",
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "$$hashKey": "object:793",
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ],
                "yaxis": {
                  "align": false,
                  "alignLevel": null
                }
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": null,
                "fieldConfig": {
                  "defaults": {},
                  "overrides": []
                },
                "fill": 1,
                "fillGradient": 0,
                "gridPos": {
                  "h": 8,
                  "w": 7,
                  "x": 0,
                  "y": 42
                },
                "hiddenSeries": false,
                "id": 137,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": true,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "nullPointMode": "null",
                "options": {
                  "alertThreshold": true
                },
                "percentage": false,
                "pluginVersion": "7.5.5",
                "pointradius": 2,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "exemplar": true,
                    "expr": "sum(rate(container_network_receive_bytes_total{namespace=~\"$namespace\", pod=~\"($app_name).*\"}[2m])) by (pod_name)",
                    "interval": "",
                    "legendFormat": "{{ pod_name }}  Received",
                    "refId": "A"
                  },
                  {
                    "exemplar": true,
                    "expr": "sum(rate(container_network_transmit_bytes_total{namespace=\"$namespace\", pod=~\"($app_name).*\"}[2m])) by (pod_name)",
                    "hide": false,
                    "interval": "",
                    "legendFormat": "{{ pod_name }}  Transmitted",
                    "refId": "B"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeRegions": [],
                "timeShift": null,
                "title": "Driver Network I/O",
                "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "$$hashKey": "object:94",
                    "format": "bytes",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "$$hashKey": "object:95",
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ],
                "yaxis": {
                  "align": false,
                  "alignLevel": null
                }
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": null,
                "fieldConfig": {
                  "defaults": {},
                  "overrides": []
                },
                "fill": 1,
                "fillGradient": 0,
                "gridPos": {
                  "h": 8,
                  "w": 7,
                  "x": 7,
                  "y": 42
                },
                "hiddenSeries": false,
                "id": 157,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": true,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "nullPointMode": "null",
                "options": {
                  "alertThreshold": true
                },
                "percentage": false,
                "pluginVersion": "7.5.5",
                "pointradius": 2,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "exemplar": true,
                    "expr": "sum(metrics_executor_MajorGCTime_seconds_total{namespace=~\"$namespace\", application_name=~\"$app_name\"}) by (application_id)",
                    "interval": "",
                    "legendFormat": "{{application_id}}",
                    "refId": "A"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeRegions": [],
                "timeShift": null,
                "title": "Major Garbage Collection",
                "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "$$hashKey": "object:447",
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "$$hashKey": "object:448",
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ],
                "yaxis": {
                  "align": false,
                  "alignLevel": null
                }
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": null,
                "fieldConfig": {
                  "defaults": {},
                  "overrides": []
                },
                "fill": 1,
                "fillGradient": 0,
                "gridPos": {
                  "h": 8,
                  "w": 7,
                  "x": 14,
                  "y": 42
                },
                "hiddenSeries": false,
                "id": 159,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": true,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "nullPointMode": "null",
                "options": {
                  "alertThreshold": true
                },
                "percentage": false,
                "pluginVersion": "7.5.5",
                "pointradius": 2,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "exemplar": true,
                    "expr": "SUM(metrics_executor_totalShuffleWrite_bytes_total{namespace=~\"$namespace\", application_name=~\"$app_name\"})",
                    "interval": "",
                    "legendFormat": "Shuffle Write",
                    "refId": "A"
                  },
                  {
                    "exemplar": true,
                    "expr": "SUM(metrics_executor_totalShuffleRead_bytes_total{namespace=~\"$namespace\", application_name=~\"$app_name\"})",
                    "hide": false,
                    "interval": "",
                    "legendFormat": "Shuffle Read",
                    "refId": "B"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeRegions": [],
                "timeShift": null,
                "title": "Shuffle",
                "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "$$hashKey": "object:504",
                    "format": "bytes",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "$$hashKey": "object:505",
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ],
                "yaxis": {
                  "align": false,
                  "alignLevel": null
                }
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": null,
                "fieldConfig": {
                  "defaults": {},
                  "overrides": []
                },
                "fill": 1,
                "fillGradient": 0,
                "gridPos": {
                  "h": 8,
                  "w": 9,
                  "x": 0,
                  "y": 50
                },
                "hiddenSeries": false,
                "id": 161,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": true,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "nullPointMode": "null",
                "options": {
                  "alertThreshold": true
                },
                "percentage": false,
                "pluginVersion": "7.5.5",
                "pointradius": 2,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "exemplar": true,
                    "expr": "sum({__name__=~\"metrics_spark_.*_driver_spark_streaming_.*_latency_Value\"}) by (name)",
                    "interval": "",
                    "legendFormat": "Spark Streaming Latency",
                    "refId": "A"
                  }
                ],
                "thresholds": [],
                "timeRegions": [],
                "title": "Latency",
                "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "$$hashKey": "object:102",
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "$$hashKey": "object:103",
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ],
                "yaxis": {
                  "align": false,
                  "alignLevel": null
                }
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": null,
                "fieldConfig": {
                  "defaults": {},
                  "overrides": []
                },
                "fill": 1,
                "fillGradient": 0,
                "gridPos": {
                  "h": 8,
                  "w": 12,
                  "x": 9,
                  "y": 50
                },
                "hiddenSeries": false,
                "id": 163,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": true,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "nullPointMode": "null",
                "options": {
                  "alertThreshold": true
                },
                "percentage": false,
                "pluginVersion": "7.5.5",
                "pointradius": 2,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "exemplar": true,
                    "expr": "sum({__name__=~\"metrics_spark_.*_driver_spark_streaming_.*_processingRate_total_Value\"}) by (name) ",
                    "interval": "",
                    "legendFormat": "Processing Rate",
                    "refId": "A"
                  },
                  {
                    "exemplar": true,
                    "expr": " sum({__name__=~\"metrics_spark_.*_driver_spark_streaming_.*_inputRate_total_Value\"}) by (name)",
                    "hide": false,
                    "interval": "",
                    "legendFormat": "Input Rate",
                    "refId": "B"
                  }
                ],
                "thresholds": [],
                "timeRegions": [],
                "title": "Rates",
                "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "$$hashKey": "object:210",
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "$$hashKey": "object:211",
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ],
                "yaxis": {
                  "align": false,
                  "alignLevel": null
                }
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": null,
                "fieldConfig": {
                  "defaults": {},
                  "overrides": []
                },
                "fill": 1,
                "fillGradient": 0,
                "gridPos": {
                  "h": 8,
                  "w": 9,
                  "x": 0,
                  "y": 58
                },
                "hiddenSeries": false,
                "id": 164,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": true,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "nullPointMode": "null",
                "options": {
                  "alertThreshold": true
                },
                "percentage": false,
                "pluginVersion": "7.5.5",
                "pointradius": 2,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "exemplar": true,
                    "expr": "sum({__name__=~\"metrics_spark_.*_driver_spark_streaming_.*_eventTime_watermark_Value\"}) by (name) ",
                    "interval": "",
                    "legendFormat": "Watermark",
                    "refId": "A"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeRegions": [],
                "timeShift": null,
                "title": "Watermark",
                "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "$$hashKey": "object:210",
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "$$hashKey": "object:211",
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ],
                "yaxis": {
                  "align": false,
                  "alignLevel": null
                }
              },
              {
                "aliasColors": {},
                "bars": false,
                "dashLength": 10,
                "dashes": false,
                "datasource": null,
                "fieldConfig": {
                  "defaults": {},
                  "overrides": []
                },
                "fill": 1,
                "fillGradient": 0,
                "gridPos": {
                  "h": 8,
                  "w": 12,
                  "x": 9,
                  "y": 58
                },
                "hiddenSeries": false,
                "id": 165,
                "legend": {
                  "avg": false,
                  "current": false,
                  "max": false,
                  "min": false,
                  "show": true,
                  "total": false,
                  "values": false
                },
                "lines": true,
                "linewidth": 1,
                "nullPointMode": "null",
                "options": {
                  "alertThreshold": true
                },
                "percentage": false,
                "pluginVersion": "7.5.5",
                "pointradius": 2,
                "points": false,
                "renderer": "flot",
                "seriesOverrides": [],
                "spaceLength": 10,
                "stack": false,
                "steppedLine": false,
                "targets": [
                  {
                    "exemplar": true,
                    "expr": "sum({__name__=~\"metrics_spark_.*_driver_spark_streaming_.*_states_rowsTotal_Value\"}) by (name) ",
                    "interval": "",
                    "legendFormat": "Total Rows",
                    "refId": "A"
                  }
                ],
                "thresholds": [],
                "timeFrom": null,
                "timeRegions": [],
                "timeShift": null,
                "title": "Rows Processed",
                "tooltip": {
                  "shared": true,
                  "sort": 0,
                  "value_type": "individual"
                },
                "type": "graph",
                "xaxis": {
                  "buckets": null,
                  "mode": "time",
                  "name": null,
                  "show": true,
                  "values": []
                },
                "yaxes": [
                  {
                    "$$hashKey": "object:210",
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  },
                  {
                    "$$hashKey": "object:211",
                    "format": "short",
                    "label": null,
                    "logBase": 1,
                    "max": null,
                    "min": null,
                    "show": true
                  }
                ],
                "yaxis": {
                  "align": false,
                  "alignLevel": null
                }
              }
            ],
            "refresh": "5s",
            "schemaVersion": 27,
            "style": "dark",
            "tags": [],
            "templating": {
              "list": [
                {
                  "allValue": null,
                  "current": {
                    "selected": true,
                    "text": [
                      "All"
                    ],
                    "value": [
                      "$__all"
                    ]
                  },
                  "datasource": "default",
                  "definition": "label_values(kube_pod_labels{label_sparkoperator_k8s_io_launched_by_spark_operator=\"true\"}, namespace)",
                  "description": null,
                  "error": null,
                  "hide": 0,
                  "includeAll": true,
                  "label": "K8s Namespace",
                  "multi": true,
                  "name": "namespace",
                  "options": [],
                  "query": {
                    "query": "label_values(kube_pod_labels{label_sparkoperator_k8s_io_launched_by_spark_operator=\"true\"}, namespace)",
                    "refId": "StandardVariableQuery"
                  },
                  "refresh": 2,
                  "regex": "",
                  "skipUrlSync": false,
                  "sort": 0,
                  "tagValuesQuery": "",
                  "tags": [],
                  "tagsQuery": "",
                  "type": "query",
                  "useTags": false
                },
                {
                  "allValue": null,
                  "current": {
                    "selected": true,
                    "text": [
                      "mytestapp"
                    ],
                    "value": [
                      "mytestapp"
                    ]
                  },
                  "datasource": "default",
                  "definition": "label_values(kube_pod_labels{namespace = \"$namespace\"}, label_sparkoperator_k8s_io_app_name)",
                  "description": null,
                  "error": null,
                  "hide": 0,
                  "includeAll": true,
                  "label": "Application Name",
                  "multi": true,
                  "name": "app_name",
                  "options": [],
                  "query": {
                    "query": "label_values(kube_pod_labels{namespace = \"$namespace\"}, label_sparkoperator_k8s_io_app_name)",
                    "refId": "StandardVariableQuery"
                  },
                  "refresh": 1,
                  "regex": "",
                  "skipUrlSync": false,
                  "sort": 0,
                  "tagValuesQuery": "",
                  "tags": [],
                  "tagsQuery": "",
                  "type": "query",
                  "useTags": false
                }
              ]
            },
            "time": {
              "from": "now-3h",
              "to": "now"
            },
            "timepicker": {
              "refresh_intervals": [
                "5s",
                "10s",
                "30s",
                "1m",
                "5m",
                "15m",
                "30m",
                "1h",
                "2h",
                "1d"
              ],
              "time_options": [
                "5m",
                "15m",
                "1h",
                "6h",
                "12h",
                "24h",
                "2d",
                "7d",
                "30d"
              ]
            },
            "timezone": "",
            "title": "Spark: Applications",
            "uid": "tYYsVm6Mz",
            "version": 1
          }
